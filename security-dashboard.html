<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal OS - Security Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1a1a;
            color: #e0e0e0;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #4CAF50;
            font-size: 2.5em;
            text-shadow: 0 0 10px rgba(76, 175, 80, 0.3);
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: linear-gradient(135deg, #2d2d2d, #3a3a3a);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid #444;
        }
        
        .card h3 {
            margin-bottom: 15px;
            color: #4CAF50;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        
        .score-card {
            text-align: center;
        }
        
        .score-display {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .score-excellent { color: #4CAF50; }
        .score-good { color: #FF9800; }
        .score-needs-attention { color: #f44336; }
        
        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .status-excellent {
            background-color: #4CAF50;
            color: white;
        }
        
        .status-good {
            background-color: #FF9800;
            color: white;
        }
        
        .status-needs-attention {
            background-color: #f44336;
            color: white;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            text-align: center;
        }
        
        .stat-item {
            background: rgba(76, 175, 80, 0.1);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(76, 175, 80, 0.3);
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }
        
        .issues-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            text-align: center;
        }
        
        .issue-count {
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
        }
        
        .critical-issues {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid #f44336;
        }
        
        .medium-issues {
            background: rgba(255, 152, 0, 0.2);
            border: 1px solid #FF9800;
        }
        
        .low-issues {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid #4CAF50;
        }
        
        .recommendations {
            list-style: none;
        }
        
        .recommendations li {
            padding: 8px 0;
            border-bottom: 1px solid #444;
        }
        
        .recommendations li:before {
            content: "üîß ";
            margin-right: 8px;
        }
        
        .compliance-bars {
            margin-top: 15px;
        }
        
        .compliance-item {
            margin-bottom: 15px;
        }
        
        .compliance-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .compliance-bar {
            height: 20px;
            background: #444;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .compliance-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        
        .projects-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: #2d2d2d;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .projects-table th,
        .projects-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #444;
        }
        
        .projects-table th {
            background: #3a3a3a;
            font-weight: bold;
            color: #4CAF50;
        }
        
        .projects-table tr:hover {
            background: rgba(76, 175, 80, 0.1);
        }
        
        .project-score {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 5px;
        }
        
        .project-critical { background: rgba(244, 67, 54, 0.3); }
        .project-warning { background: rgba(255, 152, 0, 0.3); }
        .project-good { background: rgba(76, 175, 80, 0.3); }
        
        .refresh-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .refresh-btn:hover {
            background: #45a049;
        }
        
        .loading {
            text-align: center;
            color: #FF9800;
            font-style: italic;
        }
        
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid,
            .issues-summary {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõ°Ô∏è Personal OS Security Dashboard</h1>
        
        <button class="refresh-btn" onclick="loadSecurityData()">üîÑ Refresh</button>
        
        <div id="loading" class="loading">Loading security data...</div>
        
        <div id="dashboard-content" style="display: none;">
            <div class="dashboard-grid">
                <!-- Overall Security Score -->
                <div class="card score-card">
                    <h3>Overall Security Score</h3>
                    <div id="overall-score" class="score-display">--</div>
                    <div id="overall-status" class="status-badge">Loading</div>
                </div>
                
                <!-- Security Statistics -->
                <div class="card">
                    <h3>Security Statistics</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span id="total-projects" class="stat-value">--</span>
                            <div>Projects Scanned</div>
                        </div>
                        <div class="stat-item">
                            <span id="vault-files" class="stat-value">--</span>
                            <div>Vault Files</div>
                        </div>
                    </div>
                </div>
                
                <!-- Issues Summary -->
                <div class="card">
                    <h3>Security Issues</h3>
                    <div class="issues-summary">
                        <div class="issue-count critical-issues">
                            <div id="critical-count" class="stat-value">--</div>
                            <div>Critical</div>
                        </div>
                        <div class="issue-count medium-issues">
                            <div id="medium-count" class="stat-value">--</div>
                            <div>Medium</div>
                        </div>
                        <div class="issue-count low-issues">
                            <div id="low-count" class="stat-value">--</div>
                            <div>Low</div>
                        </div>
                    </div>
                </div>
                
                <!-- Compliance Status -->
                <div class="card">
                    <h3>Compliance Status</h3>
                    <div class="compliance-bars">
                        <div class="compliance-item">
                            <div class="compliance-label">
                                <span>Personal Security</span>
                                <span id="personal-score">--</span>
                            </div>
                            <div class="compliance-bar">
                                <div id="personal-fill" class="compliance-fill" style="width: 0%; background: #4CAF50;"></div>
                            </div>
                        </div>
                        <div class="compliance-item">
                            <div class="compliance-label">
                                <span>Data Protection</span>
                                <span id="data-score">--</span>
                            </div>
                            <div class="compliance-bar">
                                <div id="data-fill" class="compliance-fill" style="width: 0%; background: #2196F3;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recommendations -->
                <div class="card">
                    <h3>Top Recommendations</h3>
                    <ul id="recommendations" class="recommendations">
                        <li>Loading recommendations...</li>
                    </ul>
                </div>
            </div>
            
            <!-- Projects Table -->
            <div class="card">
                <h3>Project Security Status</h3>
                <table class="projects-table">
                    <thead>
                        <tr>
                            <th>Project</th>
                            <th>Security Score</th>
                            <th>Status</th>
                            <th>Issues</th>
                            <th>Critical Issues</th>
                        </tr>
                    </thead>
                    <tbody id="projects-table-body">
                        <tr>
                            <td colspan="5" style="text-align: center;">Loading projects...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Load security data from Python backend
        async function loadSecurityData() {
            try {
                document.getElementById('loading').style.display = 'block';
                document.getElementById('dashboard-content').style.display = 'none';
                
                // This would normally fetch from a backend API
                // For now, we'll simulate loading the data
                setTimeout(() => {
                    // Sample data - in real implementation, this would come from the Python backend
                    const mockData = {
                        security_overview: {
                            overall_score: 71.8,
                            status: "good",
                            total_projects: 22,
                            last_scan: "2025-08-26T21:36:59"
                        },
                        issue_summary: {
                            critical: 16,
                            medium: 43,
                            low: 2,
                            total: 61
                        },
                        vault_status: {
                            encrypted_files: 0,
                            vault_exists: false
                        },
                        top_recommendations: [
                            "Overall security score is low - prioritize security improvements",
                            "Address 16 critical security issues immediately",
                            "Consider using vault system to store sensitive credentials",
                            "Security monitoring approaching token budget limit"
                        ],
                        compliance: {
                            personal_security: { score: 75 },
                            data_protection: { score: 68 }
                        },
                        recent_projects: [
                            { name: "legiscraper", score: 80, status: "good", issue_count: 2, critical_issues: 0 },
                            { name: "vendor-quote-tool", score: 80, status: "good", issue_count: 2, critical_issues: 0 },
                            { name: "scrapers", score: 70, status: "warning", issue_count: 3, critical_issues: 1 },
                            { name: "Personal-OS", score: 90, status: "good", issue_count: 1, critical_issues: 0 },
                            { name: "JoblistingsAnalysis", score: 60, status: "critical", issue_count: 4, critical_issues: 2 }
                        ]
                    };
                    
                    updateDashboard(mockData);
                }, 1000);
                
            } catch (error) {
                console.error('Error loading security data:', error);
                document.getElementById('loading').innerHTML = 'Error loading security data. Please try again.';
            }
        }
        
        function updateDashboard(data) {
            // Update overall score
            const overallScore = document.getElementById('overall-score');
            const overallStatus = document.getElementById('overall-status');
            
            overallScore.textContent = data.security_overview.overall_score + '/100';
            overallScore.className = 'score-display score-' + data.security_overview.status;
            
            overallStatus.textContent = data.security_overview.status.toUpperCase();
            overallStatus.className = 'status-badge status-' + data.security_overview.status;
            
            // Update statistics
            document.getElementById('total-projects').textContent = data.security_overview.total_projects;
            document.getElementById('vault-files').textContent = data.vault_status.encrypted_files;
            
            // Update issues
            document.getElementById('critical-count').textContent = data.issue_summary.critical;
            document.getElementById('medium-count').textContent = data.issue_summary.medium;
            document.getElementById('low-count').textContent = data.issue_summary.low;
            
            // Update compliance
            document.getElementById('personal-score').textContent = data.compliance.personal_security.score + '%';
            document.getElementById('personal-fill').style.width = data.compliance.personal_security.score + '%';
            
            document.getElementById('data-score').textContent = data.compliance.data_protection.score + '%';
            document.getElementById('data-fill').style.width = data.compliance.data_protection.score + '%';
            
            // Update recommendations
            const recommendationsList = document.getElementById('recommendations');
            recommendationsList.innerHTML = '';
            data.top_recommendations.forEach(rec => {
                const li = document.createElement('li');
                li.textContent = rec;
                recommendationsList.appendChild(li);
            });
            
            // Update projects table
            const tableBody = document.getElementById('projects-table-body');
            tableBody.innerHTML = '';
            
            data.recent_projects.forEach(project => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${project.name}</td>
                    <td><span class="project-score project-${project.status}">${project.score}/100</span></td>
                    <td><span class="status-badge status-${project.status}">${project.status.toUpperCase()}</span></td>
                    <td>${project.issue_count}</td>
                    <td>${project.critical_issues}</td>
                `;
                tableBody.appendChild(row);
            });
            
            // Show dashboard
            document.getElementById('loading').style.display = 'none';
            document.getElementById('dashboard-content').style.display = 'block';
        }
        
        // Auto-refresh every 5 minutes
        setInterval(loadSecurityData, 5 * 60 * 1000);
        
        // Load data on page load
        loadSecurityData();
    </script>
</body>
</html>